{% extends 'base.html' %}
{% block content %}
    <div class="container mt-5">
    <div class="row">
        <div class="col-lg-7">
            {% for foo in order.items.all %}
                <div class="card mt-2 fa-border">
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-2">
                            <img src="{{ foo.item.image.url }}" alt="" class="card-img-top">
                            <a href="{% url 'ecom:remove-from-cart' foo.item.slug %}" class="btn btn-sm">-</a>
                            <span>{{ foo.qty }}</span>
                            <a href="{% url 'ecom:add-to-cart' foo.item.slug %}" class="btn btn-sm">+</a>
                        </div>
                        <div class="col-lg-10">
                            <h4>{{ foo.item.name }}</h4>
                            <p>Qty. {{ foo.qty }}</p>
                             {% if foo.item.discount_price %}
                                 <del><h6>Rs. {{foo.total_actual_ammount}}</h6></del>
                                 <h6>Rs. {{ foo.total_discount_ammount }}</h6>
                             {% else %}
                                 <h6>Rs. {{ foo.total_actual_ammount }}</h6>
                             {% endif %}
                        <a href="{% url 'ecom:remove-item' foo.item.slug %}" class="btn btn-sm btn-danger"><svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-trash-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5a.5.5 0 0 0-1 0v7a.5.5 0 0 0 1 0v-7z"/></svg></a>
                        </div>
                    </div>
                </div>
                </div>
            {% endfor %}
            
        </div>
        <div class="col-lg-5">
            <div class="card mt-2">
                <div class="card-body">
                    <div class="list-group">
                        <li class="list-group-item  bg-info text-white text-center">Price Detail</li>
                        <li class="list-group-item ">Total Ammount- <span class="float-right">₹ 000/-</span></li>
                        {% if order.coupon %}
                        <li class="list-group-item">Coupon Discount-({{ order.coupon.percentage }}) % <span class="float-right">₹ {{ order.get_coupon_ammount }} /-</span></li>
                        {% endif %}

                        <li class="list-group-item ">Discount Ammount- <span class="float-right">₹000/-</span></li>
                        <li class="list-group-item ">Total saving- <span class="float-right">₹000/-</span></li>
                        <li class="list-group-item ">Payable Amount- <span class="float-right">₹ {{ order.grand_total }} /-</span></li>
                    </div>
                </div>
            </div>
        <div class="row mt-5">
            <div class="col-lg-6">
                <a href="" class="btn btn-warning btn-block">Continue Shopping</a>
            </div>
            <div class="col-lg-6">
                 <a href="{% url 'ecom:checkout' %}" class="btn btn-success btn-block">Checkout</a>
            </div>
        </div>
    {% if not order.coupon %}
        <div class="card">
            <div class="card-body">
                <form action="{% url "ecom:add-coupon" %}" method="post" class="d-flex">
                   {% csrf_token %}
                    {{ form.code }}
                    <input type="submit" class="btn btn-success">
                </form>
            </div>
        </div>

        {% endif %}
        </div>
    </div>
    </div>
{% endblock %}